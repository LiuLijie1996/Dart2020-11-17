## Dart是单线程

```html
dart是单线程的模型，这意味着dart代码是有序的，按照在main函数出现的次序一个接一个的执行，不会被其他代码中断，另外，dart也支持异步，需要注意的是，单线程和异步并不冲突。
我们的app绝大多数时间都在等待，比如，等用户点击、网络请求返回，等文件IO结果，这些等待行为并不是阻塞的，单线程模型可以在等待的过程中作别的事情，等真正需要响应结果了，再去做对应的处理，等待这个行为是通过 Event Loop 驱动的
```



## 事件循环

![](E:\笔记\Dart2020-11-17\images\事件循环.jpg)



## 任务调度

1. 将任务添加到`MicroTask`队列的两种方式

   ```dart
   import 'dart:async';
   
   
   /*
     事件循环:
       1、执行顺序：同步代码 --> 微任务代码 --> 事件队列
       2、程序运行时，整套代码一条线执行，先执行同步代码，将微任务代码添加到任务队列中，异步代码添加到事件队列中
       3、当代码运行完成之后，再回来进入微任务队列中循环微任务，执行完成之后，然后进入事件队列中循环异步代码
       4、微任务和异步代码都遵循先入先出的原则
   */
   void main(List<String> args) {
     print("main开始");
   
     // 将任务添加到事件队列
     Future(() => print("事件队列1"));
   
     // 将任务添加到微任务队列中
     scheduleMicrotask(()=>print("微任务1"));
     // 将任务添加到微任务队列中
     Future.microtask(() => print("微任务2"));
   
     // 将任务添加到事件队列
     Future(() => print("事件队列2"));
   
     print("main结束");
   }
   ```

   

## Future类

```

```

